<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<link rel="icon" href="logo.jpg">
<title>AO Asset</title>

<script src="https://cdn.tailwindcss.com"></script>

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: '#011f51',
        dark: '#010e25',
        accent: '#2e7eff',
        textmain: '#e8ecff',
        textsoft: '#a3b5e4',
      },
      fontFamily: {
        poppins: ['Poppins', 'sans-serif'],
      },
    },
  },
};
</script>

<style>

body {
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg, #010e25, #011f51);
  color: #e8ecff;
  margin: 0;
}

.login-card {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 18px;
  backdrop-filter: blur(14px);
  box-shadow: 0 6px 25px rgba(0, 0, 0, 0.45);
  animation: fadeIn 0.6s ease;
}

input {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.18);
  color: #e8ecff;
  outline: none;
  transition: 0.2s;
}

input::placeholder {
  color: rgba(255,255,255,0.6);
}

input:focus {
  border-color: #4c8dff;
  box-shadow: 0 0 0 2px rgba(46,126,255,0.25);
}

.login-btn {
  background: linear-gradient(135deg, #2e7eff, #0040b5);
  border-radius: 10px;
  color: white;
  font-weight: 600;
  padding: 12px;
  width: 100%;
  transition: 0.2s;
  box-shadow: 0 4px 12px rgba(0,64,181,0.35);
}

.login-btn:hover {
  background: linear-gradient(135deg, #4c91ff, #013b9a);
  box-shadow: 0 6px 18px rgba(46,126,255,0.45);
}

.secondary-btn {
  background: rgba(255,255,255,0.12);
  border-radius: 10px;
  padding: 10px;
  width: 100%;
}

.title {
  color: #4c8dff;
  font-weight: 600;
  font-size: 1.7rem;
}

.subtitle {
  color: #a3b5e4;
  font-size: 0.9rem;
}

@media(max-width:768px){
  .right-image{
    display:none;
  }
}

@keyframes fadeIn{
  from{opacity:0; transform:translateY(8px);}
  to{opacity:1; transform:translateY(0);}
}

</style>


<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
import { getFirestore, doc, getDoc, setDoc }
from "https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js";


/* FIREBASE INIT */

const firebaseConfig = {

  apiKey: "AIzaSyCtdmsd0gWLPqwNpRI2lpiif_FuG-PTHjQ",
  authDomain: "ao-asset.firebaseapp.com",
  projectId: "ao-asset",
  storageBucket: "ao-asset.firebasestorage.app",
  messagingSenderId: "406786910363",
  appId: "1:406786910363:web:1d837738aab6c6b9d73e3e"

};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);



/* LOGIN STATE CONTROL */

let loginInProgress = false;



/* LOGIN FUNCTION */

window.login = async function(event){

  if(event) event.preventDefault();

  if(loginInProgress) return;

  const usernameField = document.getElementById("username");
  const passwordField = document.getElementById("password");

  const username = usernameField.value.trim();
  const password = passwordField.value.trim();

  if(!username || !password) return;

  loginInProgress = true;

  try{

    const userDoc =
      await getDoc(doc(db,"users",username));

    if(userDoc.exists() &&
       userDoc.data().password === password){

      sessionStorage.setItem("user",username);

      window.location.href = "dashboard.html";

    }
    else{

      loginInProgress = false;
      alert("Invalid credentials");

    }

  }
  catch(error){

    loginInProgress = false;
    alert("Login failed. Try again.");

  }

};



/* ADMIN SEED FUNCTION */

window.seedAdmin = async function(){

  await setDoc(doc(db,"users","admin"),{
    password:"admin123"
  });

  alert("Admin created:\nusername: admin\npassword: admin123");

};



/* AUTO-LOGIN DETECTION (AUTOFILL, WINDOWS HELLO, PASSWORD MANAGERS) */

function checkAutofillAndLogin(){

  if(loginInProgress) return;

  const username =
    document.getElementById("username").value.trim();

  const password =
    document.getElementById("password").value.trim();

  if(username && password){

    login();

  }

}



/* INITIALIZE LISTENERS */

window.addEventListener("DOMContentLoaded",()=>{

  const usernameField = document.getElementById("username");
  const passwordField = document.getElementById("password");


  /* detect manual input */
  usernameField.addEventListener("input",checkAutofillAndLogin);
  passwordField.addEventListener("input",checkAutofillAndLogin);

  usernameField.addEventListener("change",checkAutofillAndLogin);
  passwordField.addEventListener("change",checkAutofillAndLogin);


  /* detect autofill after page load */
  setTimeout(checkAutofillAndLogin,500);
  setTimeout(checkAutofillAndLogin,1200);

});


</script>

</head>



<body>

<div class="flex flex-col md:flex-row min-h-screen">

<!-- LOGIN SIDE -->

<div class="flex justify-center items-center w-full md:w-1/2 px-6 py-12">

<div class="login-card p-8 w-full max-w-md text-center">

<h1 class="title mb-3">
Welcome to AO Asset
</h1>

<p class="subtitle mb-8">
Sign into your account
</p>


<!-- FORM START -->

<form onsubmit="login(event)" autocomplete="on">

<input
type="text"
id="username"
placeholder="Username"
autocomplete="username"
class="w-full p-3 mb-4 rounded-lg"
/>

<input
type="password"
id="password"
placeholder="Password"
autocomplete="current-password"
class="w-full p-3 mb-6 rounded-lg"
/>

<button type="submit" class="login-btn mb-4">
Log In
</button>

</form>

<!-- FORM END -->


<button onclick="seedAdmin()" class="secondary-btn mb-6">
Seed Admin
</button>


<p class="text-xs text-textsoft">

By logging in, you agree to the Terms and Conditions.

</p>


<p class="text-xs text-textsoft mt-6">

Â© 2025 AO Asset And Facility Management System

</p>

</div>

</div>



<!-- IMAGE SIDE -->

<div class="w-full md:w-1/2 h-screen right-image">

<img
src="backside.jpeg"
class="w-full h-full object-cover"
/>

</div>


</div>

</body>
</html>